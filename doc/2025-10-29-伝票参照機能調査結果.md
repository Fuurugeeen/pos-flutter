# POSシステム 伝票参照画面ナビゲーション動線調査結果

調査日時: 2025-10-29
調査対象: /Users/furugen/dev/src/pos-flutter

## 調査結果サマリー

**結論**: 伝票参照画面へのナビゲーション動線は、**実装されていません**。

## 詳細調査結果

### 1. ダッシュボード画面のクイックアクション
**ファイル**: `/Users/furugen/dev/src/pos-flutter/lib/features/dashboard/screens/dashboard_screen.dart`

ダッシュボード画面には以下の3つのクイックアクションボタンが実装されています:
- POS レジ (`/pos`)
- 商品管理 (`/products`)
- 顧客管理 (`/customers`)

**伝票参照へのリンク**: ❌ なし

最近の売上セクションには「すべて見る」ボタンがあり、レポート画面 (`/reports`) へのリンクが存在しますが、個別伝票の参照画面ではありません。

### 2. サイドナビゲーションメニュー
**ファイル**: `/Users/furugen/dev/src/pos-flutter/lib/core/layout/main_layout.dart`

サイドナビゲーション（全アプリで共通）に含まれるメニューアイテム:
1. ダッシュボード (`/dashboard`)
2. 会計 (`/pos`)
3. 商品管理 (`/products`)
4. 会員管理 (`/customers`)
5. レポート (`/reports`)
6. 在庫管理 (`/inventory`)

**伝票参照へのメニュー**: ❌ なし

### 3. ルーティング設定
**ファイル**: `/Users/furugen/dev/src/pos-flutter/lib/core/routing/app_router.dart`

定義されているルート:
- `/dashboard` - ダッシュボード
- `/pos` - POS レジ画面
- `/products` - 商品管理（ネストされた子ルート: `/add`, `/edit/:id`）
- `/customers` - 会員管理（ネストされた子ルート: `/add`, `/edit/:id`）
- `/reports` - 売上レポート
- `/inventory` - 在庫管理

**伝票参照ルート**: ❌ なし

ナビゲーション拡張機能（AppRouterExtension）に定義されたメソッド:
```dart
void goToDashboard() => go('/dashboard');
void goToPos() => go('/pos');
void goToProducts() => go('/products');
void goToCustomers() => go('/customers');
void goToReports() => go('/reports');
void goToInventory() => go('/inventory');
void goToProductAdd() => go('/products/add');
void goToProductEdit(String productId) => go('/products/edit/$productId');
void goToCustomerAdd() => go('/customers/add');
void goToCustomerEdit(String customerId) => go('/customers/edit/$customerId');
```

**伝票参照へのナビゲーション関数**: ❌ なし

### 4. 伝票参照機能の実装状況
**ディレクトリ**: `/Users/furugen/dev/src/pos-flutter/lib/features/receipts/`

このディレクトリは存在しますが、**完全に空です**。スクリーンファイルなど、何も実装されていません。

### 5. 関連機能の確認

**レシート設定** (`/Users/furugen/dev/src/pos-flutter/lib/features/auth/screens/settings_screen.dart`):
- レシートの設定画面は存在しますが、これはPOS設定です
- 過去の伝票参照機能ではありません
- この画面自体もルーティング設定に含まれていません

**売上レポート** (`/Users/furugen/dev/src/pos-flutter/lib/features/reports/screens/reports_screen.dart`):
- 期間別の売上一覧は表示されます
- ただし、個別伝票の詳細参照画面ではなく、レポート形式での表示です
- 売上データの集計・分析機能です

## 現在のナビゲーション構造

```
サイドメニュー
├── ダッシュボード (/dashboard)
│   └── 最近の売上セクション
│       └── 「すべて見る」 → /reports (売上レポート)
├── 会計 (/pos)
├── 商品管理 (/products)
├── 会員管理 (/customers)
├── レポート (/reports)
└── 在庫管理 (/inventory)
```

## 結論と推奨

### 現状
- **伝票参照画面は実装されていません**
- **ルーティング設定に伝票参照ルートが定義されていません**
- **ナビゲーションメニューに伝票参照へのアクセスポイントがありません**
- `lib/features/receipts/` ディレクトリは空で、何も実装されていません

### 今後の実装に必要な項目
1. `/lib/features/receipts/screens/receipt_list_screen.dart` - 伝票一覧画面の作成
2. `/lib/features/receipts/screens/receipt_detail_screen.dart` - 伝票詳細画面の作成
3. `/lib/core/routing/app_router.dart` へのルート追加
   - `/receipts` ルート（一覧）
   - `/receipts/:id` ルート（詳細）
4. `/lib/core/layout/main_layout.dart` のナビゲーションメニューへの追加
5. 必要に応じて、ダッシュボード画面のクイックアクションへのボタン追加

